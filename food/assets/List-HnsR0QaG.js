import{d as x,c as n,a as o,e as c,j as L,w as N,k as B,u as I,g as i,h as d,i as l,F as V,r as $,t as g,b as q,_ as D}from"./index-Cqp1XgQC.js";import{a as F}from"./food-D3suAVUb.js";const R={class:"list-page"},j={class:"header"},z=["onClick"],E={class:"card-left"},S={class:"item-name"},U={key:0,class:"item-sub"},A={class:"card-right"},m=10,G=x({__name:"List",setup(H){const u=B(),_=I(),v=i([]),r=i(!1),a=i(!1),f=i(0),p=Number(u.query.category_id),h=u.query.category_code,y=async()=>{try{const s=await F({category_id:p||void 0,category_code:h||void 0,offset:f.value,limit:m});if(s.categories&&s.categories.length>0&&s.categories[0]){const e=s.categories[0].items||[];v.value.push(...e),f.value+=e.length,e.length<m&&(a.value=!0)}else a.value=!0}catch{a.value=!0}finally{r.value=!1}},k=s=>{_.push(`/detail/${s}`)};return(s,e)=>{const C=d("van-icon"),b=d("van-image"),w=d("van-list");return l(),n("div",R,[o("div",j,[c(C,{name:"arrow-left",color:"#fff",size:"20",onClick:e[0]||(e[0]=t=>L(_).back())}),e[2]||(e[2]=o("span",{class:"header-title"},"列表详情",-1)),e[3]||(e[3]=o("span",{style:{width:"20px"}},null,-1))]),c(w,{loading:r.value,"onUpdate:loading":e[1]||(e[1]=t=>r.value=t),finished:a.value,"finished-text":"没有更多了",onLoad:y,class:"list-container"},{default:N(()=>[(l(!0),n(V,null,$(v.value,t=>(l(),n("div",{key:t.id,class:"food-card",onClick:J=>k(t.id)},[o("div",E,[o("div",S,g(t.title),1),t.subtitle?(l(),n("div",U,g(t.subtitle),1)):q("",!0)]),o("div",A,[c(b,{src:t.cover_url,fit:"cover",class:"item-img"},null,8,["src"])])],8,z))),128))]),_:1},8,["loading","finished"])])}}}),O=D(G,[["__scopeId","data-v-3d550638"]]);export{O as default};
